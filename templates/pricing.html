{% extends "base.html" %}
{% block content %}
<h2>Premium Plans</h2>

<button onclick="pay(9999)">Starter - ₹9,999</button>
<button onclick="pay(19999)">Pro - ₹19,999</button>

<script>
function pay(amount) {
fetch("/create-order", {
method: "POST",
headers: {"Content-Type": "application/x-www-form-urlencoded"},
body: "amount=" + amount
})
.then(res => res.json())
.then(data => {
var options = {
"key": "{{key_id}}",
"amount": data.amount,
"currency": "INR",
"order_id": data.id,
"handler": function (response){
fetch("/verify-payment", {
method: "POST",
headers: {"Content-Type": "application/json"},
body: JSON.stringify(response)
}).then(() => {
window.location.href="/";
});
}
};
var rzp = new Razorpay(options);
rzp.open();
});
}
</script>

{% endblock %}
